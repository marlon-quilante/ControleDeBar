@using System.Globalization
@model EditarProdutoViewModel

@{
    ViewBag.Titulo = "Edição de Produto";
}

<form class="col-lg-5 col-xl-4 needs-validation" action="/Produto/Editar/@Model.Id" method="post" novalidate>
    <div class="mb-3">
        <label class="form-label" asp-for="Nome">Nome:</label>
        <input class="form-control" asp-for="Nome" name="Nome" id="Nome" type="text" value="@Model.Nome" required>
        <span asp-validation-for="Nome" class="text-danger"></span>
        <div class="invalid-feedback">
            Informe o nome do produto!
        </div>
    </div>

    <div class="mb-3">
        <label class="form-label" asp-for="Preco">Preço:</label>
        <input class="form-control" asp-for="Preco" name="Preco" id="Preco" type="text" pattern="^\d+([,\.]\d{1,2})?$" value="@Model.Preco.ToString("F2", CultureInfo.CurrentCulture)" required>
        <div class="invalid-feedback">
            Informe o preço do produto!
        </div>
    </div>

    <div class="d-flex justify-content-end">
        <a class="btn btn-secondary px-4 me-1" asp-action="Index">Voltar</a>
        <button class="btn btn-success px-4 me-1" type="submit">Salvar</button>
    </div>
</form>

@* Script de validação com Bootstrap *@
<script>
    (() => {
        'use strict'

        const forms = document.querySelectorAll('.needs-validation')

        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()){
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
    })()
</script>